---
layout: post
title: 网络层刷题笔记
date: 2024-12-05 16:29:23
tags:
categories: 计算机网络
hidden: true
---

{% note info **异构网络** %}
异构网络指由**路由器**连接起来的数据链路层和物理层都不相同的网络。网络层的任务之一就是使异构网络实现互联。
{% endnote %}

{% note info **静态路由与动态路由** %}
路由是指数据包在网络中经过的路径，即数据从一台设备到另一台设备选择经过的路。
- **静态路由**：由**网络管理员手动创建的路由**，路由器的路由表条目由网络管理员手动填充。而且静态路由是固定的，不会随着网络的改变而变化。路由器之间不必交换动态路由信息，占用设备的资源很少。
- **动态路由**：路由器能够根据路由器之间交换的特定路由信息**自动建立路由表**，并且能够根据链路和节点的变化适时地进行自动调整。

不论是哪种路由都需要使用**路由选择表**来进行路由选择，只不过静态路由像跟旅行团旅游，动态路由像自由行。
{% endnote %}

{% note info **路由表和转发表的区别 ** %}
1. **路由表**用以存放路由信息，包括了目标地址、掩码、下一跳。 
2. **转发表**主要用以在主机内部将一个数据包从一个端口导向另一端口  
{% endnote %}

{% note info **网络拥塞控制** %}
开环控制：依据用户的协议限制进入网络的交通，从而阻止拥塞的发生（车牌限号）
闭环控制：运行时解决问题（红绿灯）
{% endnote %}

{% note info **利用 FQDN 来查询 IP 地址** %}
FQDN 是**完全合格域名/全程域名**的缩写（Fully Qualified Domain Name），由“主机名” + “域名” + “.”  组成。

FQDN 来查询 IP 地址的操作称为**正向名称查询**，IP 查询 FQDN 称为**反向名称查询**。 
{% endnote %}

---

{% note success **网络层协议** %}
除了IP、ARP、ICMP之外，还有一些常见的网络层协议：
- RIP：路由信息协议
    应用于规模较小的、可靠性要求较低的网络，可以通过不断的交换信息让路由器动态的适应网络连接的变化，这些信息包括每个路由器可以到达哪些网络，这些网络有多远等。RIP是基于**距离-向量**的路由选择协议。
- OSPF：开放式最短路径优先协议
    广泛使用的一种路由协议，它属于**链路状态**路由协议，具有路由变化收敛速度快、无路由环路、支持变长子网掩码（VLSM）和汇总、层次区域划分等优点
- BGP：边界网关协议
    互联网上一个核心的去中心化**自治**（AS）路由协议，通过路径向量选择路由，支持策略路由
- IGP：内部网关协议
    **自治**（AS）路由协议统称
- IGMP：互联网组管理协议
    用于管理网路协议多播组成员的一种通信协议
- CIDR：无类别域间路由
    不指定网络号或主机号的位数，使子网划分更灵活，可以把小的网络汇聚成更大的超网，更有效地分配ipv4空间

ICMP被封装在IP数据报的数据部分。
{% endnote %}

{% note success **通过IP地址与子网掩码计算网络号** %}
将IP地址与子网掩码进行`&`操作即可得到网络号（主机号）：

<img src="https://b.bdstatic.com/comment/HPpFm-ziUYsgpwpjCcQ1VAce5ab60634eda7b8fc53ec301ee12beb.jpeg" />

当主机号不同时代表两个ip不在一个网络里，需要借助路由器进行通信。
{% endnote %}

{% note success **能接收目的地址的IP分组的最大主机数** %}
在子网192.168.4.0/30中，能接收目的地址为192.168.4.3的IP分组的最大主机数是？

首先分析192.168.4.0/30这个网络，主机号只占2位，地址范围为192.168.4.0～192.168.4.3，主机号全1时，即192.168.4.3是广播地址，主机号全0表示本网络本身，不作为主机地址使用，因此可容纳4-2=2个主机。
{% endnote %}

---

{% note danger **IP协议是无连接不可靠的服务** %}
因此，该层也是无连接不可靠的。
{% endnote %}

{% note danger **IP路由器不对收到的 IP 分组头进行差错校验** %}
IP层为什么不对数据部分进行差错校验？ 

因为网络层是“尽最大努力完整的传输数据包”，差错检测已由数据链路层实现，IP层没必要再进行一次校验。 

- **优点**：不负责差错检测和纠错，所以可获得较高的传输性能。 

- **缺点**：IP层不负责差错检测，那么错误检测只能在传输层或应用层被发现，使纠正错误的时间增加了。 
{% endnote %}