---
title: 计算机网络(1)整体概念介绍
tags: ['计算机网络','计算机科学技术','面试相关']
categories: 计算机网络
date: '2024-03-11 19:05:58'
copyright_author: 时光
cover: geometry_glacier_httpss.mj.runswt2Oa1F9yI_a_man_in_19_standing__5ec542d1-feff-42e9-bb7c-14048fa4dbba.png
katex: true
hidden: true
---

# 计算机网络的概念及功能

<img src="https://img11.360buyimg.com/ddimg/jfs/t1/184415/38/42968/76339/65f183f7F4e35ca9b/03ea0efc07cb7122.jpg" width=500 alt="计算机网络" title="计算机网络" />

<!-- more -->

## 概念

> **计算机网络**（英语：computer network），通常也简称网络，是指容许节点分享资源的数字电信网络。在电脑网络，电脑设备会透过**节点**之间的连接（数据链路）互相交换数据，即收发（接收和发放）网络信息。

> A computer network is a **system** that connects two or more computing devices for transmitting and sharing information. Computing devices include everything from a mobile phone to a server. These devices are connected using physical wires such as fiber optics, but they can also be wireless.
"计算机网络是连接两台或多台计算设备以实现传输和共享信息目的的系统。计算设备包括手机、服务器等一系列设备，它们通过物理缆线（如光纤）或无线的方式相互连接。"

以上概念分别引自维基百科和Spiceworks，维基的叙述方式比较学术，其中的一些概念（比如节点）会在后续介绍到。总的来说，计算机网络是一个将分散的、具有独立功能的**计算机系统**，通过**通信设备**（如路由器、中继器、交换机）与**线路**（有线或无线）连接起来，由功能完善的**软件**实现 {% label success @资源共享 %} 和 {% label success @信息传递 %} 的系统。

{% note warning simple %}
为什么是由功能完善的软件实现资源共享和信息传递的呢？
{% endnote %}

计算机网络是一个互连的、自治的计算机集合。其中，
- **互连**：通过通信链路互联互通
- **自治**：无主从关系、各个终端高度自治

{% note warning 计算机网络的具体功能 %}
计算机网络系统有以下具体功能：
- **数据通信**：终端之间通过数据链路互相交换数据，即收发（接收和发放）网络信息。
- **资源共享**：同一个计算机网络上的其他计算机可以使用某台计算机的计算机资源的行为，可以共享硬件、软件、数据。
    - 硬件共享：使用学校的网络打印机
    - 软件共享：远程访问其他电脑，使用上面的软件（比如qq的远程控制）
    - 数据共享：云端数据库
- **分布式处理**：多台计算机各自承担同一工作任务的不同部分，使工作效率提高。
- **提高可靠性**：这是分布式处理的一个优点，如果网络中的一台主机宕机，集群中还有其他机器可以顶替其工作。
- **负载均衡**：这也是分布式处理的优点，可以让任务量分到多台计算机上。
{% endnote %}

## 饭后消遣：互联网的历史
美苏冷战时期，为防止苏联针对性的破坏主机，美国国防部想出了将主机分散到各地并使用链路链接起来共享数据的办法。在这种情况下，即使苏联炸毁了一台主机，其他主机也保存有重要的军事资料，这个系统被成为“**阿帕网**”（ARPAnet）。随着各地**网络**（net）逐渐出现，美国国防部最后接受了TCP/IP协议，将这些网络互连，**互联网**（internet）初具规模。在这个阶段：
网络把许多计算机连接在一起，而互联网则把许多网络连接在一起，**因特网**（Internet）是世界上最大的互联网。
- 网络：若干节点（如终端、交换机）、以及连接这些节点的链路
- 互联网：若干网络通过**路由器**连接在一起

1985年，美国简历了国家科学基金网，设计了计算机网络的三级结构。在美国的大部分学校以及研究所，如果用户想要连接到互连线，首先需要登录校园网或企业网，随后连接到地区网，再连接到主干网。

<img src="https://img12.360buyimg.com/ddimg/jfs/t1/90758/30/45069/22193/65f18c00F2cf091db/df76dd09e5179bf5.jpg" alt="三级结构" title="三级结构" />

再后来，随着互联网规模的壮大，美国将网络服务移交给了一些网络服务提供商（ISP）。ISP是一个向广大用户综合提供互联网接入业务、信息业务和增值业务的公司，分为主干ISP、地区ISP和本地ISP。我国有名的提供商有中国移动、中国联通、中国电信等。
而我们平常交的“网费”，其实就是给各ISP的服务费，以通过ISP申请到可以上网的IP地址。

<img src="https://img11.360buyimg.com/ddimg/jfs/t1/232181/22/15139/41646/65f18f47F69746809/e3ba03fb71a25846.jpg" alt="多层次ISP结构" title="多层次ISP结构" />

在多层次ISP结构中，有一个因特网交换点（IXP）的概念。IXP通过直接相连两个网络，允许用户AB通信时跳过图中的主干ISP。

这基本就是今天互联网的模型。互联网依然是若干网络通过**路由器**连接在一起组成的。

# 组成及分类
## 计算机网络的组成
计算机网络是由 {%label warning @硬件 %}、{%label warning @软件 %} 和 {%label warning @协议 %} 三大要素按照一系列规则和约定组成的集合。

{% note warning 硬件、软件和协议 %}
- **硬件**
各类端系统（终端）、路由器、交换机等；
- **软件**
附加在端系统上、或中间设备上的计算机程序；
- **协议**
软件通过协议传输数据，协议规定了数据在计算机网络中流通的规则。
{% endnote %}

而从**工作方式**上，可以把计算机网络分为{%label warning @边缘部分 %} 和 {%label warning @核心部分 %}。

{% note warning 边缘部分和核心部分 %}
- **边缘部分**
由各类端系统组成，包括计算机、摄像头、服务器等需要使用网络的终端，位于计算机网络系统的边缘。边缘系统通过以下方式实现通信：
    - **C/S方式**
    C/S 即 {%label info @Client%} 与 {%label info @Server %}，服务器与客户端，是最古老的一种通信方式。例如：当我们用qq发送消息时，我们的端系统（C）会先将消息发送给腾讯服务器（S），服务器处理完消息后再发送给接收人（C）。
    访问服务的人越多，服务就越慢。
    - **B/S方式**
    B/S 即 {%label info @Broswer %} 与 {%label info @Server %}。在这个场景中，客户端被换成了浏览器，其他部分与C/S相同。
    - **P2P**
    P2P 即 peer-to-peer ，{%label info @对等连接 %}。在这个模式中，端系统同时具有客户端与服务器的身份，可以彼此之间收发消息。在P2P网络中，主机的数量越多下载的速度就越快。
    <img src="https://www.researchgate.net/publication/238638509/figure/fig1/AS:392801603866627@1470662608756/Architecture-of-C-S-and-P2P.png" width=500 alt="C/S方式（左）与对等连接（右）" title="C/S方式（左）与对等连接（右）" />
    
- **核心部分**
为边缘部分提供服务，实现端与端之间的通信（即两个端系统之间的**进程之间的通信**）。其中包括路由器、中间设备等。
{% endnote %}

从**功能组成**上，可以把计算机网络分为负责**数据通信**的 {%label warning @通信子网 %} 和负责**资源共享**或**数据处理**的 {%label warning @资源子网 %} 两部分。

{% note warning 通信子网和资源子网 %}
在 {%label primary @OSI七层模型 %} 中，下三层（**网络层**、**数据链路层**、**物理层**）代表了 <u> 通信子网 </u>；上三层（**应用层**、**表示层**、**会话层**）代表了 <u> 资源子网 </u>。
> **通信子网**
    >- 由网络层的**路由器**、数据链路层的**交换机**和**网桥**、物理层的**集线器**和**中继器**组成。
    >- 具有传输、交换、控制和存储的能力，可以实现联网计算机之间数据的通信。

> **资源子网**
    >- 实现资源共享功能的设备和软件的集合。

{% endnote %}

## 计算机网络的分类
按照**分布范围**，计算机网络可以分成 {%label success @广域网/WAN %}、{%label success @城域网/MAN %} 、{%label success @局域网/LAN %} 和 {%label success @个人区域网/PAN %} 四种类型。

{% note warning 按照分布范围分类的四种计算机网络 %}
1. 广域网
使用交换技术（通过路由器等设备转发、存储、交换）。
覆盖范围是几十时到几千公里，是因特网的主要组成部分，允许跨国传输数据。
2. 城域网
可以覆盖一个城市的网络。
3. 局域网
使用广播技术。
在地理上范围比较小，比如一个学校、公司。
4. 个人区域网
使用无线技术。
十米左右，基本指的是在个人电子设备（如手机、手环）相互连接。
{% endnote %}

按照**使用者**区分，可以分成 {%label success @公用网 %} 和 {%label success @专用网 %} (如军队、政府等)。
按照**数据交换技术**区分，则可以分成 {%label success @电路交换 %} 、{%label success @报文交换 %} 和 {%label success @分组交换 %} 三种类型。

{% note warning 按照数据交换技术分类的三种计算机网络 %}
1. 电路交换
分为三个步骤（参考打电话）：建立连接、通话（期间一直占用连接，即**占线**）、释放连接。
2. 报文交换
使用了存储转发的技术，将报文传输给路由器A，再由路由器A根据最优路径原则转发给路由器B，最后转发到目的地。
3. 分组交换
与报文交换类似，其实“分组”就是将一整个完整的报文细分成小的“组”。
{% endnote %}

按照**拓扑结构**分类，还可以将网络分成 {%label success @总线型 %}、{%label success @星型 %} 、{%label success @环型 %} 和 {%label success @网状型 %}（广域网常用的拓扑结构） 等多种类型。在这种分类中，我们将端系统或路由器抽象成一个个**节点**、将通信链路抽象成**线**，二者相结合的结构就是网络的“**拓扑结构**”。

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/NetworkTopologies.svg/1200px-NetworkTopologies.svg.png" width=500 alt="几种不同的网络拓扑结构" title="几种不同的网络拓扑结构" />

最后，按照**传输技术**区分，可以分成 {%label success @广播式网络 %} 和 {%label success @点对点网络 %} 。

{% note warning 按照传输技术分类的两种计算机网络 %}
1. 广播式网络
共享公共通信信道，应用于局域网（通常使用总线型拓扑结构）。
2. 点对点网络
使用**分组存储转发**和**路由选择**机制，应用于广域网（需要众多节点实现这两个功能，因此是网状结构）。
{% endnote %}

# 标准化工作及相关组织
在计算机网络领域，标准化非常重要，不同的设备直接能够互相连接的基础就是公用一套相同的标准。标准主要有以下两类：
- **法定标准**
由权威机构制定的正式的、合法的标准，例如 {%label primary @OSI七层模型 %}。
- **事实标准**
约定俗成的标准，通常由科技巨头牵头形成，例如 {%label primary @TCP/IP模型 %}。

需要注意的是，所有因特网标准都是通过**RFC**（Request for comment）形式记录的。RFC是用来记录互联网规范、协议、过程等的标准文件，基本的互联网通信协议都有在RFC文件内详细说明。RFC中也有一些恶搞文档，比如“鸽联网”，那么RFC要怎么上升为真正的因特网正是标准呢？一般来说，需要经过以下五（四）个阶段：
1. **因特网草案**
在这个阶段还不是RFC文档，只是一个构思。完成构思后，作者需要将其发送至RFC编辑的邮箱中。
2. **建议标准**
当RFC编辑审核通过提案后，草案就成为了RFC文档，变成了“建议的标准”。
3. **请求评论**
这也是为什么该文档被称为“RFC”的原因。在这一阶段，文档被发布到论坛上，世界各地的人都可以对文档提出建议，完善标准。
4. **草案标准**（该阶段已与2011年取消）
最终，草案交由**IETF**与**IAB**两个国际组织进行审核。
5. **因特网标准**
审核通过后，草案成为了新的因特网标准！

{% note warning 与标准化工作相关的组织 %}
1. **国际标准化组织ISO**
最重要的组织，建立了OSI参考模型、HDLC协议。
2. **国际电信联盟ITU**
制定了通信规则。
3. **国际电气电子工程师学会IEEE**
是一个顶级学术机构，提出了IEEE802系列标准、5G标准协议等。
4. **互联网工程任务组IETF**
负责因特网相关标准的制定，例如前文的RFC草案审批。
{% endnote %}

# 性能指标
## 速率
**速率**，或称 **{%label danger @数据传输率 %}**、**{%label danger @比特率 %}**，是指连接在计算机网络上的 **主机** 在数字信道上传送数据 **位数的速率**。
> **比特**(bit)
比特是数据传输的**原子单位**，只有 1 和 0 两种形式，单位为“**位**（b）”。

比特率规定使用“**比特每秒**”（bit/s或bps）为单位，经常和国际单位制词头关联在一起，如“千”Kilo（kbit/s或kbps），“兆”Mega (百万)（Mbit/s或Mbps），“吉”Giga（Gbit/s或Gbps）和“太”Tera（Tbit/s或Tbps）。其中，相邻量级之间相差1000：

<img src="https://img12.360buyimg.com/ddimg/jfs/t1/244318/38/6081/8670/65f5aae7F2de8152c/7469f6263e4eaec6.jpg" alt="单位换算" title="单位换算" />

{% note warning 我怎么记得1MB=1024KB？ %}
容易产生这个混淆，是因为在**存储容量**领域中TB、GB、MB、KB、B确实是逐级相差1024（也就是2^10）倍的。
为啥呢？因为此“B”非彼“b”，存储容量中的“B”指的是Byte（字节），一个 Byte 包含了 8 个 bit（比特）。而之后的KB、MB、GB、...都是以“B”作为基础的。
而在**数据传输速率**上，你有没有发现所有单位的 b 都是**小写**的 b 呢？所以 1Kb 真的就是 1K 个 b ，也就是 1000b 的意思。
我们需要特别注意大小写的问题。

<img src="https://img12.360buyimg.com/ddimg/jfs/t1/238136/7/13949/8403/65f5ad5fF17b446c4/eea738fb4fec5eab.jpg" alt="存储容量单位" title="存储容量单位" />

{% endnote %}

## 带宽
**带宽**，在通信领域指某个**信号**具有的**频带宽度**，即最高频率与最低频率之差，单位是赫兹（Hz）。在计算机网络领域中，**带宽**指的则是网络的通信线路传送数据的能力，通常指单位时间内从网络中的某一点到另一点所能通过的“**{%label danger @最高数据率 %}**”，单位和速率一样。
从另一个角度说，带宽反映了网络设备所支持的**最高发送速度**。
链路带宽1Mb/s，代表主机在1秒的时间内可以发送1Mb数据（即1us内发送1bit数据）。

> **"发送速度"和"传输速度"并不相同！**
信息以电磁波的形式在链路中传播，而电磁波在链路中的传播速度为2 \* 10^8 m/s，该传输速度是恒定的。之所以比光速（3 \* 10^8 m/s）慢，是因为传播介质造成了损耗（并非在真空中传输）。在这个条件下，电磁波在1us的时间内可以传输200m。
带宽所表明的“**发送速度**”则代表主机在单位时间内能往链路上发送多少的数据量，或者说**{%label danger @最高数据率 %}**。

## 吞吐量
**吞吐量**表示在**单位时间**内通过某个**网络、信道或接口**的**数据量**，单位和速率以及带宽一样。
吞吐量受到带宽和速率的影响，具体表现在：
- 一条链路的带宽代表了吞吐量的上限；
- 吞吐量代表单位时间内通过链路的所有数据量，是单位时间内所有往主机发送数据的服务器的速率的和

## 时延
**时延**指的是**数据**（如报文/分组/比特流）从网络/链路的一端传送到另一端所需要的**时间**，也叫 *延迟* 或 *迟延*，单位为s。
时延分为以下四种，总时延为它们的和：
1. **发送时延**（传输时延）
    指从发送分组的第一个比特算起，到该分组的最后一个比特发送完成所需要的时间。
    **发送时延 = 数据量 / 发送速率**
    这代表如果有一组 200Mb 的数据待发送，但主机的速率只有 2Mbps，就需要 100 秒的时间才能发送完，这100s就是发送时延。最低发送时延的数值为数据量 / 信道带宽。
2. **传播时延**
    数据在链路上传播经过的时间。这段时间与电磁波的传播速度（常数，刚才介绍过了）和链路长度有关。
    **传播时延 = 链路长度 / 电磁波速度**
3. **排队时延**
    指的是数据等待输出/输入链路**可用**的等待时间。当数据到达用以转发数据的**路由器**时，由于一台路由器的处理能力有限，数据可能会被暂存在路由器的**缓冲**中。当数据进入路由器，排队就结束了。
    在下面的处理时延结束之后，数据可能要**等待输出链路可用**，这时候的等待时间仍属于排队时延。
4. **处理时延**
    数据进入路由器之后，路由器需要对数据进行**处理**，处理所花费的时间就是处理时延。处理的过程包括检查数据是否出错、为数据寻找传输出口等。

## 时延带宽积
**时延带宽积**又称为“**以比特为单位的链路长度**”，指的是**传播时延**与**带宽**的乘积，单位是bit。时延带宽积是一个描述**数据量**的性能属性，代表了某段链路现在有多少比特。
时延带宽积 = 传播时延 × 带宽
在公式中，传播时延的单位是s，带宽以bps作为单位。
<img src="https://img14.360buyimg.com/ddimg/jfs/t1/244876/6/5801/17539/65faf2fcFb5d98f00/c483363a8be522df.jpg" alt="image.png" title="image.png" />

## 往返时间RTT
往返时间RTT指的是从发送方**发送数据**开始，到发送方收到接收方的**确认**（接收方收到数据后立即发送确认）**总共经历的时延**。
RTT = 传播时延 * 2 + 末端处理时间
两倍的传播时延代表了**往返的传播时延**，末端处理时间则指的是**接收方对数据的处理时间**。
RTT越大，在收到确认之前可以发送的数据越多。这并不一定是件好事，比如在实时团队合作FPS游戏中，如果一个玩家与游戏服务器之间的RTT很大，在其他玩家眼里该玩家可能是在不断瞬移的。

## 利用率
**利用率**分为**信道利用率**和**网络利用率**。
- **信道利用率**
    信道利用率 = 信道上有数据通过的时间 / 总时间
- **网络利用率**
    网络利用率 = 所有信道的加权平均值

利用率与时延存在指数关系。当利用率接近最大时，信道也是非常拥堵的，导致时延增大。
<img src="https://img11.360buyimg.com/ddimg/jfs/t1/106751/18/39582/7284/65faf5eeFfa2417c0/98107564652b1386.jpg" width=300 alt="image.png" title="image.png" />

| 复习周期 |   1d   |   2d   |   7d   |   21d  |
|  :----: | :----: | :----: | :----: | :----: |
|  /      |        |        |        |        |